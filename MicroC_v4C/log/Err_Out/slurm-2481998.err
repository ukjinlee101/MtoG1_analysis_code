Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 4
Rules claiming more threads will be scaled down.
Provided resources: mem_mb=1000, mem_mib=954, disk_mb=1000, disk_mib=954
Select jobs to execute...

[Wed Aug 27 18:33:37 2025]
rule step:
    input: /athena/apostoloulab/scratch/ukl4001/reference/mm10/mm10.bin.5kb.bed, /athena/apostoloulab/scratch/ukl4001/data/v4C/vpInfo/vp.ENSMUSG00000076431.Sox4.bed, /athena/apostoloulab/scratch/collab/Genome/Mus_Musculus/UCSC/mm10/Sequence/WholeGenomeFasta/genome.fa.fai, /athena/apostoloulab/scratch/ukl4001/reference/mm10/MboI_mm10.bed
    output: /athena/apostoloulab/scratch/ukl4001/temp/region1.ENSMUSG00000076431.Sox4__5kb, /athena/apostoloulab/scratch/ukl4001/temp/step1.ENSMUSG00000076431.Sox4__5kb, /athena/apostoloulab/scratch/ukl4001/temp/slop.ENSMUSG00000076431.Sox4__5kb, /athena/apostoloulab/scratch/ukl4001/temp/step.ENSMUSG00000076431.Sox4__5kb
    jobid: 0
    reason: Forced execution
    wildcards: gene=ENSMUSG00000076431.Sox4, res=5
    threads: 4
    resources: mem_mb=1000, mem_mib=954, disk_mb=1000, disk_mib=954, tmpdir=/athena/cayuga_0007/scratch/ukl4001/temp


		# Extract bin with VP (region1)
		intersectBed -a /athena/apostoloulab/scratch/ukl4001/reference/mm10/mm10.bin.5kb.bed -b /athena/apostoloulab/scratch/ukl4001/data/v4C/vpInfo/vp.ENSMUSG00000076431.Sox4.bed -wa -u > /athena/apostoloulab/scratch/ukl4001/temp/region1.ENSMUSG00000076431.Sox4__5kb
		
		# (ARCHIVED) Expand the region of interest to +- 2Mb (slop)
		# slopBed -i /athena/apostoloulab/scratch/ukl4001/temp/region1.ENSMUSG00000076431.Sox4__5kb -g /athena/apostoloulab/scratch/collab/Genome/Mus_Musculus/UCSC/mm10/Sequence/WholeGenomeFasta/genome.fa.fai -b 2000000 > /athena/apostoloulab/scratch/ukl4001/temp/slop.ENSMUSG00000076431.Sox4__5kb
		
		# Get the chromosome name from the viewpoint file, find the full size of ghromozome, and create slope for the entire chromosome
		grep -w "$(cut -f1 /athena/apostoloulab/scratch/ukl4001/temp/region1.ENSMUSG00000076431.Sox4__5kb)" /athena/apostoloulab/scratch/collab/Genome/Mus_Musculus/UCSC/mm10/Sequence/WholeGenomeFasta/genome.fa.fai | awk '{print $1 "\t0\t" $2}' > /athena/apostoloulab/scratch/ukl4001/temp/slop.ENSMUSG00000076431.Sox4__5kb


		# Create (res) kb windows with 0.05*(res) bp steps within regions (step)
		window=$((1000*5))
		step=$((50*5))
		bedtools makewindows -b /athena/apostoloulab/scratch/ukl4001/temp/slop.ENSMUSG00000076431.Sox4__5kb -w ${window} -s ${step} > /athena/apostoloulab/scratch/ukl4001/temp/step.ENSMUSG00000076431.Sox4__5kb
		
		# Count number of restriction sites within each window (step1)
		intersectBed -a /athena/apostoloulab/scratch/ukl4001/temp/step.ENSMUSG00000076431.Sox4__5kb -b /athena/apostoloulab/scratch/ukl4001/reference/mm10/MboI_mm10.bed -c > /athena/apostoloulab/scratch/ukl4001/temp/step1.ENSMUSG00000076431.Sox4__5kb
		
Activating conda environment: bioinfo
[Wed Aug 27 18:34:00 2025]
Finished job 0.
1 of 1 steps (100%) done
